---
import Layout from "../layouts/Layout.astro";
import HeaderMenu from "../Components/HeaderMenu.astro";
---

<Layout>
  <div id="qrCustom" style="margin: 40px auto; width: fit-content;"></div>
  <h1>Escanea tu pedido aquí</h1>

  <!-- Cargar la librería QRCode -->
  <script is:raw src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <!-- Generar el código QR -->
  <script is:raw>
    const min = 1000;
    const max = 9999;
    const precioR = Math.floor(Math.random() * (max - min + 1)) + min;
    console.log("Precio aleatorio:", precioR);

    window.addEventListener("DOMContentLoaded", () => {
      const qrElemento = document.getElementById("qrCustom");
      if (qrElemento && window.QRCode) {
        new QRCode(qrElemento, {
          text: precioR.toString(),
          width: 400,
          height: 400,
          colorDark: "#000000",
          colorLight: "#ffffff",
          correctLevel: QRCode.CorrectLevel.H
        });
      } else {
        console.error("No se encontró el elemento o QRCode no está disponible.");
      }
    });
  </script>
</Layout>

<style>
  h1 {
    text-align: center;
    color: white;
  }

  #qrCustom {
    transition: all 0.3s ease;
  }

  #qrCustom:hover {
    animation: animacion 0.5s forwards;
  }

  @keyframes animacion {
    100% {
      box-shadow: 1px 2px 10px 2px white;
      transform: scale(1.02);
    }
  }
</style>
